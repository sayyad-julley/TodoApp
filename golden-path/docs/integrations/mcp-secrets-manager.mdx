---
title: MCP Secrets Manager
description: Model Context Protocol server for AWS Secrets Manager integration
---

# MCP Secrets Manager Integration

The MCP Secrets Manager provides a Model Context Protocol (MCP) server and CLI tool for managing AWS Secrets Manager, enabling seamless integration with Claude Desktop and other AI assistants.

## Overview

<CardGroup cols={2}>
  <Card title="MCP Server" icon="server">
    Full MCP server for Claude Desktop integration
  </Card>
  <Card title="CLI Tool" icon="terminal">
    Interactive command-line interface
  </Card>
  <Card title="Secure Auth" icon="lock">
    Support for AWS profiles, access keys, and environment variables
  </Card>
  <Card title="Complete CRUD" icon="gear">
    Create, read, update, delete, and list secrets
  </Card>
</CardGroup>

## Installation

```bash
cd mcp-secrets-manager
npm install
chmod +x src/cli.js
```

## Quick Start

### Interactive CLI Mode

```bash
node src/cli.js interactive
```

### Quick Todo App Setup

Automatically set up secrets for your Todo App:

```bash
node src/cli.js setup-todo
```

### MCP Server Mode

```bash
node src/cli.js server --region us-east-1
```

## CLI Commands

### Server Mode

Start the MCP server for Claude integration:

<CodeGroup>
```bash Profile
node src/cli.js server --profile my-profile
```

```bash Region
node src/cli.js server --region us-west-2
```

```bash Access Keys
node src/cli.js server \
  --access-key-id YOUR_KEY \
  --secret-access-key YOUR_SECRET
```
</CodeGroup>

### Secret Management

<CodeGroup>
```bash List Secrets
node src/cli.js list

# Filter by pattern
node src/cli.js list --pattern "todoapp/*"

# List by tag
node src/cli.js list --tag "environment:production"
```

```bash Get Secret
# Get metadata
node src/cli.js get todoapp/jwt/secret

# Show value
node src/cli.js get todoapp/jwt/secret --show

# Get specific version
node src/cli.js get todoapp/jwt/secret --version AWSPREVIOUS
```

```bash Create Secret
# From command line
node src/cli.js create my-secret \
  --value "my-secret-value" \
  --description "My secret"

# From file
node src/cli.js create my-secret --file ./secret.txt

# JSON secret
node src/cli.js create db-config \
  --value '{"host":"localhost","port":5432}' \
  --json
```
</CodeGroup>

## Claude Desktop Integration

### Configuration

Add to your Claude Desktop configuration (`claude_desktop_config.json`):

```json
{
  "mcpServers": {
    "aws-secrets-manager": {
      "command": "node",
      "args": ["/path/to/mcp-secrets-manager/src/index.js"],
      "env": {
        "AWS_REGION": "us-east-1",
        "AWS_PROFILE": "your-profile"
      }
    }
  }
}
```

### Available MCP Tools

- `init_aws` - Initialize AWS credentials
- `list_secrets` - List all secrets with filtering
- `get_secret` - Get secret value
- `create_secret` - Create new secret
- `update_secret` - Update existing secret
- `delete_secret` - Delete secret
- `describe_secret` - Get secret metadata
- `search_secrets` - Search secrets by pattern

### Example Usage

```
User: List all secrets for my todo app

Assistant: [Uses list_secrets with filter "todoapp/*"]

Found 2 secrets:
1. todoapp/database/credentials - Database credentials
2. todoapp/jwt/secret - JWT signing secret
```

## Configuration

### Environment Variables

```bash
export AWS_REGION=us-east-1
export AWS_PROFILE=my-profile
export AWS_ACCESS_KEY_ID=your-key
export AWS_SECRET_ACCESS_KEY=your-secret
```

### AWS Profiles

Create `~/.aws/credentials`:

```ini
[default]
aws_access_key_id = YOUR_ACCESS_KEY_ID
aws_secret_access_key = YOUR_SECRET_ACCESS_KEY

[my-profile]
aws_access_key_id = ANOTHER_KEY
aws_secret_access_key = ANOTHER_SECRET
```

## Todo App Integration

### Required Secrets

1. **Database Credentials**: `todoapp/database/credentials`
   ```json
   {
     "username": "your_db_user",
     "password": "your_secure_password",
     "host": "your-rds-endpoint.region.rds.amazonaws.com",
     "port": 5432,
     "database": "todoapp"
   }
   ```

2. **JWT Secret**: `todoapp/jwt/secret`
   ```
   your-super-secure-jwt-secret-key
   ```

### Environment Variables

```bash
DB_SECRET_ARN=arn:aws:secretsmanager:region:account-id:secret:todoapp/database/credentials-xxxxx
JWT_SECRET_ARN=arn:aws:secretsmanager:region:account-id:secret:todoapp/jwt/secret-xxxxx
AWS_REGION=us-east-1
```

## Security Best Practices

<Steps>
  <Step title="Use IAM Roles">
    Prefer IAM roles over access keys when running on AWS infrastructure
  </Step>
  <Step title="Least Privilege">
    Grant only necessary permissions to your IAM roles/users
  </Step>
  <Step title="Enable Rotation">
    Use automatic rotation for database credentials
  </Step>
  <Step title="Monitor Access">
    Use CloudTrail to monitor secret access
  </Step>
  <Step title="Secure Storage">
    Never commit secrets to version control
  </Step>
</Steps>

### Required IAM Permissions

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "secretsmanager:GetSecretValue",
        "secretsmanager:DescribeSecret",
        "secretsmanager:ListSecrets",
        "secretsmanager:CreateSecret",
        "secretsmanager:UpdateSecret",
        "secretsmanager:DeleteSecret"
      ],
      "Resource": [
        "arn:aws:secretsmanager:region:account-id:secret:todoapp/*"
      ]
    }
  ]
}
```

## Troubleshooting

<AccordionGroup>
<Accordion title="Credentials Not Found">
**Error**: `AWS credentials not found or invalid`

**Solution**: Configure AWS credentials using:
- Environment variables
- AWS profile
- Access keys
</Accordion>

<Accordion title="Permission Denied">
**Error**: `You do not have permission to perform this action`

**Solution**:
1. Check IAM permissions
2. Verify resource ARNs
3. Ensure correct region
</Accordion>

<Accordion title="Secret Not Found">
**Error**: `Secret 'my-secret' not found`

**Solution**:
1. Verify secret name exists
2. Check you're in the correct region
3. Verify IAM permissions
</Accordion>
</AccordionGroup>

## Additional Resources

- [AWS Secrets Manager Setup](/aws/secrets-manager)
- [AWS Secrets Manager Documentation](https://docs.aws.amazon.com/secretsmanager/)
- [MCP Protocol Specification](https://modelcontextprotocol.io/)

