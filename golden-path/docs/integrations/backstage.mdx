---
title: Backstage Integration
description: Complete guide to integrating Backstage software templates with Traycer AI plans
---

# Backstage Integration

The Golden Path includes full Backstage integration for creating projects directly from the Backstage UI with automatic Traycer implementation plan generation.

## Overview

The Backstage integration provides:

- **Software Templates**: Create projects from Backstage UI
- **Traycer AI Integration**: Automatic implementation plan generation
- **Golden Path Compliance**: Ensures consistent project structure
- **Catalog Registration**: Auto-registers components in Backstage catalog

<CardGroup cols={2}>
  <Card title="Template System" icon="file-code">
    Backstage software templates for project scaffolding
  </Card>
  <Card title="AI Planning" icon="robot">
    Traycer generates implementation plans automatically
  </Card>
  <Card title="GitHub Integration" icon="github">
    Automatic repository creation and publishing
  </Card>
  <Card title="Catalog Sync" icon="list">
    Components registered in Backstage catalog
  </Card>
</CardGroup>

## Architecture

```
┌─────────────────────────────────────┐
│      Backstage UI                   │
│  (Template Selection & Parameters) │
└──────────────┬──────────────────────┘
               │
               ▼
┌─────────────────────────────────────┐
│   Backstage Software Template      │
│  (golden-path-todo/template.yaml)  │
└──────────────┬──────────────────────┘
               │
               ▼
┌─────────────────────────────────────┐
│    Custom Traycer Action            │
│  (traycer-integration.ts)          │
│                                     │
│  • Reads Traycer specs             │
│  • Calls Traycer API or local     │
│  • Creates IMPLEMENTATION_GUIDE.md │
└──────────────┬──────────────────────┘
               │
               ▼
┌─────────────────────────────────────┐
│       Generated Project              │
│  • Base template files              │
│  • IMPLEMENTATION_GUIDE.md          │
│  • catalog-info.yaml                │
└─────────────────────────────────────┘
```

## Installation

### Prerequisites

- Node.js 18+ and yarn installed
- Backstage instance (can use provided `todo-backstage/`)
- GitHub token with `repo` scope
- (Optional) Traycer API key

### Step 1: Install Dependencies

```bash
cd todo-backstage
yarn install
```

### Step 2: Configure Environment

Set up environment variables:

```bash
# Required: GitHub token
export GITHUB_TOKEN=your-github-personal-access-token

# Optional: Traycer API (falls back to local generation if not set)
export TRAYCER_API_URL=https://api.traycer.ai
export TRAYCER_API_KEY=your-traycer-api-key
```

### Step 3: Verify Configuration

Check `app-config.yaml` includes:

```yaml
integrations:
  github:
    - host: github.com
      token: ${GITHUB_TOKEN}

traycer:
  apiUrl: ${TRAYCER_API_URL:-https://api.traycer.ai}
  apiKey: ${TRAYCER_API_KEY:-}

catalog:
  locations:
    - type: file
      target: ../../examples/template/golden-path-todo/template.yaml
      rules:
        - allow: [Template]
```

### Step 4: Build and Start

```bash
yarn tsc
yarn build:backend
yarn start
```

Backstage will be available at `http://localhost:3000`.

## Using the Template

### Access Template

1. Navigate to `http://localhost:3000/create`
2. Select **"Golden Path Fullstack Todo"** template

### Fill Parameters

**Required Fields:**
- **Project Name**: Lowercase with hyphens (e.g., `my-todo-app`)
- **Description**: Brief project description
- **Repository Location**: GitHub repository URL

**Optional Fields:**
- **Feature Type**: `feature`, `bugfix`, or `refactoring`
- **Feature Description**: Detailed description for Traycer plan

### Execute Template

Click **"Create"** to execute. The template will:

<Steps>
  <Step title="Fetch Base Template">
    Downloads/clones the golden path template and replaces placeholders
  </Step>
  <Step title="Generate Traycer Plan">
    Reads Traycer spec and generates implementation plan
  </Step>
  <Step title="Create Implementation Guide">
    Writes `IMPLEMENTATION_GUIDE.md` with detailed steps
  </Step>
  <Step title="Publish Repository">
    Creates GitHub repository and pushes all files
  </Step>
  <Step title="Register Component">
    Registers component in Backstage catalog
  </Step>
</Steps>

## Template Configuration

### Template File Structure

```
todo-backstage/
├── examples/
│   └── template/
│       └── golden-path-todo/
│           ├── template.yaml          # Backstage template definition
│           └── content/
│               └── catalog-info.yaml  # Catalog registration
└── packages/
    └── backend/
        └── src/
            └── plugins/
                └── scaffolder/
                    ├── actions/
                    │   └── traycer-integration.ts  # Custom action
                    └── traycer-module.ts           # Module registration
```

### Custom Action

The Traycer integration action (`traycer-integration.ts`) performs:

1. **Reads Traycer Spec**
   ```typescript
   const specPath = path.join(
     goldenPathDir,
     '..',
     'traycer',
     'specs',
     `${spec}.md`
   );
   ```

2. **Calls Traycer API** (if configured) or generates locally

3. **Creates Implementation Guide**
   ```typescript
   await fs.writeFile(
     'IMPLEMENTATION_GUIDE.md',
     planContent
   );
   ```

## Implementation Guide Structure

The generated `IMPLEMENTATION_GUIDE.md` includes:

```markdown
# Development Plan for {project-name}

## Project Context
- Template: Golden Path fullstack-todo
- Tech Stack: React 18 + Node.js + MongoDB + AWS

## Feature Description
{user-provided description}

## Specification Reference
{content from Traycer spec}

## Implementation Plan
{detailed steps based on spec type}

## Golden Path Compliance Checklist

### Backend Implementation
- [ ] Follow RESTful conventions
- [ ] Use authentication patterns
- [ ] Implement error handling
- [ ] Add validation

### Frontend Implementation
- [ ] Follow component patterns
- [ ] Use Tailwind CSS
- [ ] Implement state management
- [ ] Add loading/error states

### Testing Requirements
- [ ] Unit tests
- [ ] Integration tests
- [ ] E2E tests

### Documentation
- [ ] Update API docs
- [ ] Add component docs
- [ ] Update architecture docs

## Post-Implementation
1. Run npm test
2. Run npm run test:e2e
3. Ensure CodeRabbit review passes
4. Update changelog
```

## Customization

### Adding New Feature Types

1. **Create Spec File**
   ```bash
   touch golden-path/traycer/specs/security-audit.md
   ```

2. **Update Template Enum**
   ```yaml
   featureType:
     enum: [feature, bugfix, refactoring, security-audit]
   ```

3. **Update Action Handler**
   ```typescript
   spec: {
     enum: ['feature', 'bugfix', 'refactoring', 'security-audit'],
   }
   ```

### Modifying Traycer Template

Edit `golden-path/traycer/templates/backstage-golden-path.md` to customize:
- Plan structure
- Checklist items
- Post-implementation steps

### Template URL Configuration

**Production (GitHub):**
```yaml
- id: fetch-base
  action: fetch:template
  input:
    url: https://github.com/your-org/golden-path-templates
```

**Development (Local):**
```yaml
- id: fetch-base
  action: fetch:template
  input:
    url: file://../../../../golden-path/templates/fullstack-todo
```

## Troubleshooting

<AccordionGroup>
<Accordion title="Action Not Found Error">
**Error**: `Action not found: traycer:generate-plan`

**Solutions**:
1. Restart Backstage backend
2. Verify module registration in `packages/backend/src/index.ts`
3. Rebuild backend: `yarn build`
</Accordion>

<Accordion title="Template Not Showing">
**Error**: Template doesn't appear in UI

**Solutions**:
1. Check `app-config.yaml` catalog configuration
2. Verify template YAML syntax
3. Restart Backstage backend
4. Check browser console for errors
</Accordion>

<Accordion title="Traycer API Errors">
**Error**: API call fails

**Solutions**:
1. Verify API key is correct
2. Check API URL
3. Action automatically falls back to local generation
4. Check backend logs for details
</Accordion>

<Accordion title="GitHub Publishing Fails">
**Error**: Repository creation fails

**Solutions**:
1. Verify GitHub token has `repo` scope
2. Check token permissions
3. Verify repository doesn't already exist
4. Check GitHub integration in `app-config.yaml`
</Accordion>
</AccordionGroup>

## Best Practices

<CardGroup cols={2}>
  <Card title="Template Organization">
    - Keep templates in version control
    - Use semantic versioning
    - Document template changes
  </Card>
  <Card title="Spec Management">
    - Keep specs focused and specific
    - Update as patterns evolve
    - Version control spec files
  </Card>
  <Card title="Error Handling">
    - Provide fallback mechanisms
    - Log errors clearly
    - Guide users to solutions
  </Card>
  <Card title="Testing">
    - Test templates locally
    - Verify all spec types work
    - Test with and without API key
  </Card>
</CardGroup>

## Advanced Usage

### Multiple Templates

Support multiple golden path templates:

```yaml
parameters:
  properties:
    goldenPathTemplate:
      title: Golden Path Template
      type: string
      enum: [fullstack-todo, microservice, serverless]
```

### Conditional Plan Generation

Skip plan generation for certain scenarios:

```yaml
steps:
  - id: generate-traycer-plan
    action: traycer:generate-plan
    if: ${{ parameters.featureType !== 'none' }}
```

### Custom Plan Templates

Create multiple Traycer templates:

```
golden-path/traycer/templates/
├── backstage-golden-path.md
├── backstage-microservice.md
└── backstage-serverless.md
```

## Additional Resources

- [Complete Backstage Integration Guide](/../TRAYCER_BACKSTAGE_INTEGRATION.md)
- [Traycer Integration](/integrations/traycer)
- [Backstage Documentation](https://backstage.io/docs)

